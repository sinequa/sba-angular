"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9571],{54268:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>c,toc:()=>a});var s=i(74848),t=i(28453);const o={layout:"default",title:"Vanilla Builder",parent:"Applications",nav_order:5},r="Vanilla Builder",c={id:"apps/vanilla-builder",title:"Vanilla Builder",description:"Vanilla Builder",source:"@site/docs/apps/5-vanilla-builder.md",sourceDirName:"apps",slug:"/apps/vanilla-builder",permalink:"/sba-angular/docs/apps/vanilla-builder",draft:!1,unlisted:!1,editUrl:"https://github.com/sinequa/sba-angular/tree/main/docs/apps/5-vanilla-builder.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{layout:"default",title:"Vanilla Builder",parent:"Applications",nav_order:5},sidebar:"tutorialSidebar",previous:{title:"Usage Analytics",permalink:"/sba-angular/docs/apps/usage-analytics"},next:{title:"LLM Integration",permalink:"/sba-angular/docs/apps/llm-integration"}},l={},a=[{value:"Project&#39;s folder structure",id:"projects-folder-structure",level:2},{value:"/configurators",id:"configurators",level:3},{value:"/configurators/app-configuration",id:"configuratorsapp-configuration",level:3},{value:"/toolbar",id:"toolbar",level:3},{value:"config.ts",id:"configts",level:3},{value:"The ngx-ui-builder directives",id:"the-ngx-ui-builder-directives",level:2},{value:"Inside the <strong>ui-builder</strong> directives",id:"inside-the-ui-builder-directives",level:3},{value:"Static export",id:"static-export",level:2}];function d(e){const n={a:"a",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"vanilla-builder",children:"Vanilla Builder"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://github.com/sinequa/ngx-ui-builder/raw/main/docs/demo.gif",alt:"Vanilla Builder"})}),"\n",(0,s.jsxs)(n.p,{children:["Vanilla-builder is built upon a Vanilla-search's application but each pages are surrounded by the ",(0,s.jsx)(n.strong,{children:"ngx-ui-builder"})," directives to allow their customizations."]}),"\n",(0,s.jsx)(n.h2,{id:"projects-folder-structure",children:"Project's folder structure"}),"\n",(0,s.jsx)(n.h3,{id:"configurators",children:"/configurators"}),"\n",(0,s.jsxs)(n.p,{children:["Contains all ",(0,s.jsx)(n.strong,{children:"configurators"})," widgets used to customize the vanilla-search application.",(0,s.jsx)(n.br,{}),"\n","Usually, a ",(0,s.jsx)(n.strong,{children:"configurator"})," widget is associated to a SBA components. But it's not always the case."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Specific to Analytics components"}),"\n"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"configurator"}),(0,s.jsx)(n.th,{children:"description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"chart"}),(0,s.jsx)(n.td,{children:"configure a specific chart within a list of charts"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"heatmap"}),(0,s.jsx)(n.td,{children:"configure an heatmap component"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"network"}),(0,s.jsx)(n.td,{children:"configure a network component"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"timeline"}),(0,s.jsx)(n.td,{children:"configure a timeline component"})]})]})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Specific to SBA Components"}),"\n"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"configurator"}),(0,s.jsx)(n.th,{children:"description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"comments"}),(0,s.jsx)(n.td,{children:"configure a comments component"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"facet"}),(0,s.jsx)(n.td,{children:"configure a specific facet within a list of facets"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"facet-multi"}),(0,s.jsx)(n.td,{children:"configure a facet multi component"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"menu"}),(0,s.jsx)(n.td,{children:"configure the navbar menu"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"metadata"}),(0,s.jsx)(n.td,{children:"configure a metadata component"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"predefined-results-layout"}),(0,s.jsx)(n.td,{children:"configure how the results are displayed"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"preview"}),(0,s.jsx)(n.td,{children:"configure a preview component"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"search-form-legacy"}),(0,s.jsx)(n.td,{children:"configure a search bar (legacy) component"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"slide-builder"}),(0,s.jsx)(n.td,{children:"configure a slide builder component"})]})]})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Specific to Application component"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Each application's pages contains a specific ",(0,s.jsx)(n.strong,{children:"configurator"})," component.",(0,s.jsx)(n.br,{}),"\n","This component describes how to customize the page and which SBA components are allowed to drop within it."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"configurator"}),(0,s.jsx)(n.th,{children:"description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"home-facet"}),(0,s.jsx)(n.td,{children:"configure a home's facet component"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"home"}),(0,s.jsx)(n.td,{children:"configure the Vanilla's Home components"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"search"}),(0,s.jsx)(n.td,{children:"configure the Vanilla's Search components"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"configuratorsapp-configuration",children:"/configurators/app-configuration"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"configurator"}),(0,s.jsx)(n.th,{children:"description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"global"}),(0,s.jsxs)(n.td,{children:["configure the global's application configuration",(0,s.jsx)("br",{}),"Today, only those parameters are customizable:",(0,s.jsx)("br",{}),"- application's name",(0,s.jsx)("br",{}),"- font family",(0,s.jsx)("br",{}),"- background image/color",(0,s.jsx)("br",{}),"- color's theme"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"global-service"}),(0,s.jsxs)(n.td,{children:["use the configuration from the ",(0,s.jsx)(n.strong,{children:"ui-builder"})," when builder is enable and use the ",(0,s.jsx)(n.strong,{children:"config.ts"})," configuration in static mode (see ",(0,s.jsx)(n.a,{href:"#static-export",children:"static export section"}),")"]})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"toolbar",children:"/toolbar"}),"\n",(0,s.jsxs)(n.p,{children:["The toolbar component allows you to add custom options to the ",(0,s.jsx)(n.strong,{children:"ui-builder"}),"'s toolbar.",(0,s.jsx)(n.br,{}),"\n","By default, the ",(0,s.jsx)(n.strong,{children:"ui-builder"}),"'s toolbar contains only the ",(0,s.jsx)(n.code,{children:"eye"})," icon used to enable/disable the ",(0,s.jsx)(n.strong,{children:"ui-builder"})," and the undo/redo buttons."]}),"\n",(0,s.jsxs)(n.p,{children:["To add your own buttons, just add them inside the ",(0,s.jsx)(n.code,{children:"<uib-toolbar></uib-toolbar>"})," tag."]}),"\n",(0,s.jsx)(n.h3,{id:"configts",children:"config.ts"}),"\n",(0,s.jsxs)(n.p,{children:["This file contains the configuration by default.",(0,s.jsx)(n.br,{}),"\n","When you reset your configuration, the content of this file will be applied."]}),"\n",(0,s.jsxs)(n.p,{children:["Configuration are split in multiple configuration's constants to ease it's customization.",(0,s.jsx)(n.br,{}),"\n","Updating this file, allows you to specify your own configuration when the application is first launched but also when you reset the whole configuration."]}),"\n",(0,s.jsx)(n.h2,{id:"the-ngx-ui-builder-directives",children:"The ngx-ui-builder directives"}),"\n",(0,s.jsxs)(n.p,{children:["To allow customization within a page, each page contains one or more ",(0,s.jsx)(n.code,{children:"<uib-zone></uib-zone>"})]}),"\n",(0,s.jsxs)(n.p,{children:["Each ",(0,s.jsx)(n.code,{children:"<uib-zone></uib-zone>"})," contains one or more ",(0,s.jsx)(n.code,{children:"uib-directive"}),". Those directives allow the ",(0,s.jsx)(n.strong,{children:"ui-builder"})," library to know which components can be customized within each zones."]}),"\n",(0,s.jsxs)(n.h3,{id:"inside-the-ui-builder-directives",children:["Inside the ",(0,s.jsx)(n.strong,{children:"ui-builder"})," directives"]}),"\n",(0,s.jsx)(n.p,{children:"Here we are exploring the directives allowing components customization."}),"\n",(0,s.jsxs)(n.p,{children:["Below a snippet of the ",(0,s.jsx)(n.code,{children:"Home"})," page template (html)"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<uib-zone id="home">\n  ...\n  <ng-template uib-template="search-form" display="Search form" let-config>\n    <app-search-form [autocompleteSources]="config.autocompleteSources"></app-search-form>\n  </ng-template>\n  ...\n</uib-zone>\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Here a zone called ",(0,s.jsx)(n.code,{children:"home"})," is set.",(0,s.jsx)(n.br,{}),"\n","Inside this zone, a ",(0,s.jsx)(n.code,{children:"uib-directive"})," called ",(0,s.jsx)(n.code,{children:"search-form"})," is set.",(0,s.jsx)(n.br,{}),"\n","Now, the ",(0,s.jsx)(n.strong,{children:"ui-builder"})," library knows the ",(0,s.jsx)(n.code,{children:"app-search-form"})," component can be customized.",(0,s.jsx)(n.br,{}),"\n","As you can notice in this example, ",(0,s.jsx)(n.code,{children:"app-search-form"})," is not a SBA component: indeed, the ",(0,s.jsx)(n.strong,{children:"uib-builder"})," can be used with any kind of components."]}),"\n",(0,s.jsxs)(n.p,{children:["Now, take a look at the ",(0,s.jsx)(n.code,{children:"home"})," configuration object:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:"{\n  id: 'home',\n  type: '_container',\n  classes: 'd-flex align-items-center flex-column w-100',\n  items: ['home-logo', 'home-title', 'search-form', 'home-actions', 'home-facets']\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This configuration is associated with the ",(0,s.jsx)(n.code,{children:"uib-zone"})," with the id ",(0,s.jsx)(n.code,{children:"home"}),".\nSo, this describes the zone:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["the zone is a container (",(0,s.jsx)(n.code,{children:"type: '_container'"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["the zone contains various components (",(0,s.jsx)(n.code,{children:"items: [...]"}),"). Each component within this array will be rendered by index order."]}),"\n",(0,s.jsx)(n.li,{children:"class is just for css styling the host element"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["In the ",(0,s.jsx)(n.code,{children:"items"})," property, you can notice the ",(0,s.jsx)(n.code,{children:"search-form"})," id. This tells the ",(0,s.jsx)(n.strong,{children:"ui-builder"})," library to render a component whose id is ",(0,s.jsx)(n.code,{children:"search-form"})]}),"\n",(0,s.jsx)(n.p,{children:"Let's see what this component is... The template (html) gives us the answer:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'  <ng-template uib-template="search-form" display="Search form" let-config>\n    <app-search-form [autocompleteSources]="config.autocompleteSources"></app-search-form>\n  </ng-template>\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"search-component"})," is an ",(0,s.jsx)(n.code,{children:"app-search-form"})," component."]}),"\n",(0,s.jsx)(n.p,{children:"Take a look at it's configuration object:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:"{\n  id: 'search-form',\n  type: 'search-form',\n  classes: 'col-8 col-md-7 col-lg-5 col-xl-4 app-search-form px-2',\n  autocompleteSources: ['suggests','baskets','recent-documents','recent-queries','saved-queries'],\n  enableVoiceRecognition: true,\n  keepTab: true,\n  enableKeepFilters: true,\n  keepFilters: true,\n  enableAdvancedForm: true,\n  keepAdvancedSearchFilters: true\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["All properties after ",(0,s.jsx)(n.code,{children:"classes"})," are the component's inputs default values. If you want keep some inputs not configurable, do not include them in the configuration."]}),"\n",(0,s.jsxs)(n.p,{children:["Now, to allow an user to customize this values, you need to set a ",(0,s.jsx)(n.em,{children:"configurator"}),".",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.em,{children:"Configurators"})," are all set inside a special HTML tag: ",(0,s.jsx)(n.code,{children:"<uib-configurator></uib-configurator>"})]}),"\n",(0,s.jsxs)(n.p,{children:["In our example, the ",(0,s.jsx)(n.em,{children:"configutor"}),"'s template looks like this:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<uib-configurator>\n  ...\n  <ng-template uib-template="search-form" let-context>\n    <sq-search-form-legacy-configurator [context]="context">\n    </sq-search-form-legacy-configurator>\n  </ng-template>\n  ...\n</uib-configurator>\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Here we tell to the ",(0,s.jsx)(n.strong,{children:"ui-builder"})," which ",(0,s.jsx)(n.em,{children:"configurator"})," to use with ",(0,s.jsx)(n.code,{children:"search-form"}),".",(0,s.jsx)(n.br,{}),"\n","The ",(0,s.jsx)(n.code,{children:"context"})," associated is (to be simple) the ",(0,s.jsx)(n.code,{children:"search-form"}),"'s configuration object, so the ",(0,s.jsx)(n.em,{children:"configurator"})," knows how to interact with the component."]}),"\n",(0,s.jsxs)(n.p,{children:["Building a ",(0,s.jsx)(n.em,{children:"configurator"})," is quite easy."]}),"\n",(0,s.jsxs)(n.p,{children:["Below the ",(0,s.jsx)(n.code,{children:"search-form"})," ",(0,s.jsx)(n.em,{children:"configurator"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'import { Component, Input } from "@angular/core";\nimport { ConfiguratorContext } from "@sinequa/ngx-ui-builder";\n\n@Component({\n  selector: \'sq-search-form-legacy-configurator\',\n  template: `\n  <h6>Autocomplete sources</h6>\n  <uib-multi-selector\n    [options]="sources"\n    valueField="value"\n    displayField="display"\n    [(ngModel)]="context.config.autocompleteSources"\n    (ngModelChange)="context.configChanged()">\n  </uib-multi-selector>  `\n})\nexport class SearchFormLegacyConfiguratorComponent {\n  @Input() context: ConfiguratorContext;\n\n  sources = [\n    {value: "suggests", display: "Suggestions"},\n    {value: "baskets", display: "Collections (aka. baskets)"},\n    {value: "recent-documents", display: "Recent documents"},\n    {value: "recent-queries", display: "Recent queries"},\n    {value: "saved-queries", display: "Saved queries"},\n  ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"ui-builder"})," comes with multiple built-in components and ",(0,s.jsx)(n.em,{children:"configurators"})," ready to use.\nHere ",(0,s.jsx)(n.code,{children:"<uib-multi-selector></uib-multi-selector>"})," is a kind of checkboxes list."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"Configurators"})," are displayed in the ",(0,s.jsx)(n.strong,{children:"ui-builder"})," panel, but while drag'n dropping component inside a ",(0,s.jsx)(n.code,{children:"uib-zone"}),", those ",(0,s.jsx)(n.em,{children:"configurators"})," can also be displayed as a modal window."]}),"\n",(0,s.jsxs)(n.p,{children:["You must have now a good understanding how the ",(0,s.jsx)(n.strong,{children:"ui-builder"})," works in the backstage."]}),"\n",(0,s.jsx)(n.h2,{id:"static-export",children:"Static export"}),"\n",(0,s.jsxs)(n.p,{children:["Static website generation is done using Angular's schematics provided by the ",(0,s.jsx)(n.strong,{children:"ui-builder"})," library."]}),"\n",(0,s.jsxs)(n.p,{children:["This step can be done by the ",(0,s.jsx)(n.strong,{children:"Platform"})," using a json plugin."]}),"\n",(0,s.jsxs)(n.p,{children:["But you can also do this using a command line.",(0,s.jsx)(n.br,{}),"\n","Inside the ",(0,s.jsx)(n.code,{children:"package-json"})," file you can find a ",(0,s.jsx)(n.code,{children:"make-static"})," script.\nThis script tells to the Angular's schematics how to convert ",(0,s.jsx)(n.code,{children:"<uib-zone>"})," and ",(0,s.jsx)(n.code,{children:"uib-directive"})," in a static website application."]}),"\n",(0,s.jsx)(n.p,{children:"Before, you need to download the configuration as a JSON file."}),"\n",(0,s.jsx)(n.p,{children:"Take a look to this script:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'"make-static": "ng generate @sinequa/ngx-ui-builder:make-static --app-module-dependencies=projects/vanilla/src/app-dependencies.json --config=projects/vanilla/src/config.json --config-path=projects/vanilla/src/config.ts --config-identifier=GLOBAL_CONFIG",\n\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"--app-module-dependencies"})," is a configuration's dependencies file specific to vanilla-builder. It allows to remove useless dependencies depending on what components you use inside the application."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"--config"})," is the path of the project's configuration json previously downloaded."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"--config-path"})," is the path of the ",(0,s.jsx)(n.strong,{children:"config.ts"})," file to use to paste the global configuration."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"--config-identifier"})," is the name of the constant to use inside the ",(0,s.jsx)(n.strong,{children:"config.ts"})," file to paste the configuration. By default it's value is ",(0,s.jsx)(n.code,{children:"GLOBAL_CONFIG"}),", so it's optional if you don't use your own value."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["When the static generation ends, a full static Angular's application will be available without any traces of the ",(0,s.jsx)(n.strong,{children:"ui-builder"}),"'s components and directives. All the global configuration will be written inside the ",(0,s.jsx)(n.strong,{children:"config.ts"})," file and used by de configuration service by default."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>c});var s=i(96540);const t={},o=s.createContext(t);function r(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);