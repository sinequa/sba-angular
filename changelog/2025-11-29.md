# Changelog - Release 11.13.0 (2025 November 29)

All notable changes in the projects folder for release 11.13.0.

---

## Analytics

### FusionCharts

- **Fixed**: Corrected license file URL path by adding leading slash in `fusioncharts.constructor.ts`

### Timeline

- **Enhanced**: Added visibility control for date mask selector in `facet-date` component
  - Added `visible` property to `MaskProps` type
  - Mask control can now be conditionally shown/hidden using `@if(mask.visible)` directive
  - Improved mask defaults initialization with proper structure
  - Better handling of mask configuration changes in `ngOnChanges`

---

## Components

### Action

- **Enhanced**: Improved action item text overflow handling
  - Added ellipsis styling for action item content to prevent text overflow
  - Fixed dropdown menu width constraint (max-width: 24rem) for dropdown list items
  - Applied proper class to dropdown list item menus

### Baskets

- **Enhanced**: Added ellipsis styling to basket list items in `select-basket` component to prevent text overflow

### Metadata

- **Fixed**: Improved column alias matching to be case-insensitive when retrieving metadata values
  - Now properly handles column names with different casing

### Preview

- **Major Enhancement**: Added comprehensive preview improvements
  - **New Feature**: Added page navigation controls for multi-page documents
    - New `PreviewNavigator` standalone component with first/prev/next/last page controls
    - Page info tracking (`totalPages`, `currentPage`)
    - Navigation methods: `gotoPage()`, `nextPage()`, `prevPage()`, `firstPage()`, `lastPage()`
  - **New Feature**: Added AI description toggle functionality
    - New action button to show/hide AI-generated descriptions
    - CSS variable `--desc-display` to control description visibility
    - Support for documents with "ps" flag (AI-generated content)
  - **Enhanced**: Improved zoom functionality
    - Added `zoomFit()` method to automatically fit content to viewport
    - Smart fit calculation based on content width
    - Support for various document elements (div, img, table, span)
    - Proper handling of margin and scale factors
  - **Enhanced**: Preview iframe positioning improvements
    - Added `position-relative` host class for proper positioning
    - Improved iframe absolute positioning
  - **Enhanced**: Better highlight selection behavior
    - Improved scrolling behavior with `instant` mode
    - Added delay for highlight application after scroll
    - Better handling of visible elements
  - **Enhanced**: Improved passage highlighter with new CSS class-based approach
  - **Fixed**: Preview loading state management - properly reset page count on new document load
  - **Enhanced**: Styling improvements
    - Added zoom controls with CSS variables (`--factor`)
    - Support for AI-generated content styling with custom borders
    - Improved invisible extracts locations styling
    - Better shadow and animation effects for current highlights
  - **Messages**: Added German translation for toggle description action

### Search Form

- **Enhanced**: Added input validation for search queries
  - Added validation check before applying filters
  - Display error notification for invalid queries
  - New message key `invalidQuery` added to DE, EN, and FR locales

---

## Core

### Base (Utils)

- **Enhanced**: Improved `fielded` utility function to handle array values
- **Fixed**: Removed unreachable `break` statement after `return` in `calculateDuration()` method

### Web Services

- **Enhanced**: Added `skipNegotiation` option to SignalR connection configuration
- **Enhanced**: Added `enableFieldedSearch` property to `CCQuery` configuration schema
  - Controls whether fielded search is enabled for queries
  - Integrated with ExprParser to respect app service configuration

### Utils (Parser)

- **Enhanced**: ExprParser improvements
  - Added `enabledFieldedSearch` option to parser options
  - Automatically sets from `appService.ccquery.enableFieldedSearch` if not explicitly provided
  - Fielded search (`:` operator) now respects this configuration

---

## Development Configuration

### Root Package.json

- **Updated**: Dependencies
  - Added `vite` v5.4.19
  - Updated `jspdf` to flexible version (>=3.0.2)
  - Updated `tmp` to flexible version (>=0.2.4)
- **Updated**: Dev Dependencies
  - Updated `@angular-devkit/build-angular` to v18.2.8
  - Added Angular ESLint packages (v18.4.3):
    - `@angular-eslint/builder`
    - `@angular-eslint/eslint-plugin`
    - `@angular-eslint/eslint-plugin-template`
    - `@angular-eslint/schematics`
    - `@angular-eslint/template-parser`
  - Added TypeScript ESLint packages (v7.2.0):
    - `@typescript-eslint/eslint-plugin`
    - `@typescript-eslint/parser`
  - Downgraded `eslint` to v8.57.0 (from v9.0.0)
  - Added ESLint plugins:
    - `eslint-plugin-import` v2.25.2
    - `eslint-plugin-prefer-arrow` v1.2.2
  - Removed `ajv` and `ajv-keywords` dependencies

### ESLint Configuration

- **Added**: Root `.eslintrc.json` file with comprehensive linting rules
  - Angular-specific rules configured
  - TypeScript rules configured
  - HTML template rules configured
  - Custom rule overrides for project standards

### Proxy Configurations

- **Updated**: All proxy configuration files converted from array format to object format
  - `projects/hello-search/src/proxy.conf.json`
  - `projects/pepper/src/proxy.conf.json`
  - `projects/vanilla-search/src/proxy.conf.json`
  - Changed `secure` to `true` for all endpoints
  - Removed `ws` property (WebSocket support handled differently)

---

## Applications

### Vanilla Search

- **Enhanced**: Search component preview positioning
  - Added absolute positioning and full dimensions to facet-preview for better layout
- **Enhanced**: Preview script (`preview.js`) - Major rewrite
  - Added Web Worker support for improved performance
  - Better frame and frameset handling
  - Improved page navigation with `page-info` events
  - Enhanced zoom functionality with fit-to-width
  - Support for AI description toggling
  - Better event handling for page changes
  - Improved element selection across frames
  - Enhanced error handling and cross-origin frame support
- **Enhanced**: Preview styles (`preview.scss`)
  - Added comprehensive zoom support with CSS variables
  - AI-generated content styling with custom borders and labels
  - Page navigator hiding when not needed
  - Better support for invisible extracts
  - Improved shadow effects and animations

---

## Summary

This release focuses on:

1. **Preview Enhancements**: Major improvements to document preview with navigation, zoom, and AI content support
2. **UI/UX Improvements**: Better text overflow handling, validation, and responsive design
3. **Developer Experience**: Updated tooling (ESLint, build tools) and better configuration management
4. **Bug Fixes**: Case-sensitivity issues, URL paths, and code quality improvements
5. **Internationalization**: Added missing translations for new features
